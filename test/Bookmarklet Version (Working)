javascript:(function(){const html='<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>${videoData.videoTitle || "動画詳細"}</title><style>body{font-family:Arial,sans-serif;margin:0;padding:0;background-color:#121212;color:#e0e0e0}header{padding:20px;text-align:center;background-color:#1e1e1e}header h1{margin:0;font-size:24px}.container{padding:20px}.main-content{display:flex;gap:20px;align-items:flex-start}.video-section{flex:1}.video-player{width:100%;max-width:auto;margin:0 auto}video,iframe{width:100%;height:auto;background-color:black}#controls{display:flex;justify-content:center;gap:10px;overflow-x:auto;padding:10px 0}#controls button{flex:0 0 auto;padding:8px 12px;font-size:14px;cursor:pointer;background-color:#333;border:none;color:#e0e0e0;border-radius:4px}#controls button:hover{background-color:#555}#controls button.active{background-color:#bb86fc;color:#121212}.details{max-width:800px;margin:20px auto}.channel-info{display:flex;align-items:center;margin-bottom:10px}.channel-avatar{width:50px;height:50px;border-radius:50%;object-fit:cover;margin-right:10px}.comments{max-width:800px;margin:20px auto}.comment{border-bottom:1px solid #333;padding:10px 0}.comment-header{display:flex;align-items:center}.avatar{width:40px;height:40px;border-radius:50%;object-fit:cover;margin-right:10px}.comment-author{font-weight:bold}.comment-time{margin-left:auto;font-size:12px;color:#aaa}.comment-body{margin:5px 0}.comment-stats{font-size:12px;color:#aaa}a{color:#bb86fc;text-decoration:none}a:hover{text-decoration:underline}.back-link{margin-top:20px;display:block;text-align:center}.playlist-section{width:300px;background-color:#1e1e1e;padding:10px;border-radius:4px;max-height:600px;overflow-y:auto}.playlist-section h2{font-size:18px;margin-bottom:10px}.playlist-item{margin-bottom:10px;display:flex;align-items:center;gap:10px;background-color:#121212;padding:5px;border-radius:4px}.playlist-item img{width:90px;height:auto;display:block;border-radius:8px}.playlist-item-title{font-size:14px;font-weight:bold;color:#e0e0e0}.search-header{position:fixed;top:0;left:0;width:100%;background-color:#1b1b1b;padding:10px 20px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 5px rgba(0,0,0,0.5);z-index:1000}.logo a{color:#a64ac9;font-size:24px;font-weight:bold;text-decoration:none;transition:color 0.3s ease}.logo a:hover{color:#d891ef}#search-form{display:flex;max-width:600px;width:100%}#search-input{flex:1;padding:10px;border:none;border-radius:2px 0 0 2px;background-color:#333333;color:#fff;font-size:16px;outline:none}#search-form button{padding:10px 20px;border:none;background-color:#6200ea;color:#fff;font-size:16px;border-radius:0 2px 2px 0;cursor:pointer;transition:background-color 0.3s ease}#search-form button:hover{background-color:#4500b5}.loading-animation{display:flex;justify-content:center;align-items:center;height:300px}.spinner{border:8px solid rgba(255,255,255,0.2);border-top:8px solid #bb86fc;border-radius:50%;width:60px;height:60px;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style></head><body><header class="search-header"><div class="logo"><a href="/">MIN-Tube2</a></div><form id="search-form"><input type="text" id="search-input" name="q" placeholder="検索..." autocomplete="off"><button type="submit">検索</button></form></header><header><h1>status:OK</h1></header><div class="container"><div class="main-content"><div class="video-section"><div class="video-player" id="video-player-container"><div class="loading-animation"><div class="spinner"></div></div></div><div id="controls"><button id="switch-stream-url" class="active">DL‑Yvideo</button><button id="switch-nocookie">YouTube‑nocookie</button><button id="reload-video">動画を再読み込み</button><button id="refetch-video">動画を再取得</button><button id="download-video">ダウンロード</button></div><header><h1>${videoData.videoTitle || "動画詳細"}</h1></header><div class="details"><h2>動画詳細</h2><div class="channel-info"><img class="channel-avatar" src="${videoData.channelImage || ''}" alt="${videoData.channelName || 'チャンネル'}"><div><p>${videoData.channelName || 'チャンネル名未設定'}</p></div></div><p>${videoData.videoDes || "詳細情報はありません"}</p><p>視聴回数: ${videoData.videoViews ? videoData.videoViews.toLocaleString() : "0"}</p><p>いいね: ${videoData.likeCount ? videoData.likeCount.toLocaleString() : "0"}</p><p><a href="https://www.youtube.com/watch?v=${videoId}" target="_blank">YouTubeで視聴する</a></p></div><div class="comments"><h2>コメント (${commentsData.commentCount || 0} 件)</h2>${commentsHTML}</div><a class="back-link" href="/">home</a></div><div class="playlist-section"><h2>${videoData.channelName || "プレイリスト"}</h2><div id="playlist-container"><p>読み込み中...</p></div></div></div></div><script>window.addEventListener('DOMContentLoaded',()=>{const channelName="${videoData.channelName||''}";if(channelName){fetch('/api/playlist?channelName='+encodeURIComponent(channelName)).then(response=>response.json()).then(data=>{let html='';if(data.playlist&&data.playlist.length>0){data.playlist.forEach(item=>{html+=`<div class="playlist-item"><a href="/video/${item.id}"><img src="https://i3.ytimg.com/vi/${item.id}/sddefault.jpg" alt="${item.title}"><div class="playlist-item-title">${item.title}</div></a></div>`});}else{html='<p>プレイリストがありません。</p>';}document.getElementById("playlist-container").innerHTML=html;}).catch(err=>{console.error(err);document.getElementById("playlist-container").innerHTML='<p>プレイリストの読み込みに失敗しました。</p>';});}else{document.getElementById("playlist-container").innerHTML='<p>チャネル情報がありません。</p>';}const streamEmbedHTML=`${streamEmbedHTML.replace(/`/g,'\\\\`')}`;const youtubeEmbedHTML=`${youtubeEmbedHTML.replace(/`/g,'\\\\`')}`;setTimeout(()=>{const container=document.getElementById("video-player-container");if(container){container.innerHTML=streamEmbedHTML;}},1000);const btnStream=document.getElementById("switch-stream-url");const btnNocookie=document.getElementById("switch-nocookie");const btnReload=document.getElementById("reload-video");const btnRefetch=document.getElementById("refetch-video");const btnDownload=document.getElementById("download-video");btnStream.addEventListener("click",()=>{document.getElementById("video-player-container").innerHTML=streamEmbedHTML;btnStream.classList.add("active");btnNocookie.classList.remove("active");});btnNocookie.addEventListener("click",()=>{document.getElementById("video-player-container").innerHTML=youtubeEmbedHTML;btnNocookie.classList.add("active");btnStream.classList.remove("active");});btnReload.addEventListener("click",()=>{const videoElem=document.querySelector('.video-player video');if(videoElem){videoElem.load();videoElem.play();}else{const iframeElem=document.querySelector('.video-player iframe');if(iframeElem){iframeElem.src=iframeElem.src;}}});btnRefetch.addEventListener("click",()=>{window.location.reload();});btnDownload.addEventListener("click",()=>{const dlLink=("${videoData.stream_url}"!=="youtube-nocookie")?"${videoData.stream_url}":"https://www.youtube.com/watch?v=${videoId}";window.open(dlLink,'_blank');});});document.addEventListener("DOMContentLoaded",function(){const form=document.getElementById("search-form");form.addEventListener("submit",function(event){event.preventDefault();const query=document.getElementById("search-input").value.trim();if(query){window.location.href="/nothing/search?q="+encodeURIComponent(query);}});});</script></body></html>';const blob=new Blob([html],{type:'text/html'});const url=URL.createObjectURL(blob);window.location.href=url;})();
